<!DOCTYPE html>
<html>

<head>
    <title>http-vis</title>

    <meta charset='utf-8'>

    <script src="vendor/jquery-1.9.1.min.js"></script>
    <script src="vendor/underscore-min.js"></script>
    <script src="vendor/d3.v3.min.js"></script>
    <script src="vendor/packet.js"></script>
    <script src="vendor/http-parser.min.js"></script>
    <script src="vendor/bootstrap-filestyle-0.1.0.min.js"></script>
    <script src="vendor/FileSaver.js"></script>

    <script src="src/Capture.js"></script>
    <script src="src/Barcode.js"></script>
    <script src="src/StackedArea.js"></script>
    <script src="src/Palette.js"></script>
    <script src="src/Controller.js"></script>

    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap-responsive.css">

    <style type="text/css">
        body {
            padding-top: 40px;
            background-color: black;
        }
        #options {
            position: absolute;
            top: 35px;
            left: auto;
            right: 20px;
            max-width: none;
            width: 270px;
            margin-top: 10px;
            float: right;
        }
        #options .arrow {
            left: auto;
            right: 53px;
        }
        #options .popover-content input, #options .popover-content select {
            width: 242px;
        }
        #options .network-arrow {
            font-size: 16px;
        }
        #options h2 {
            text-align: left;
            font-weight: bold;
            font-size: 1em;
            margin: 0 0 5px;
            line-height: inherit;
        }
        #options form {
            margin: 0;
        }
        #options #filtering-and-bandwidth-options {
            text-align: center;
        }

        .navbar-inner>.container {
            width: auto;
            padding: 0 20px;
            text-align: left;
        }

        #navbar-info {
            font-family: "Courier New", monospace;
        }

        #navbar-info>* {
            display: inline-block;
        }

        #time-info   { width: 4em; }
        #tcp-info    { width: 5em; }
        #http-info   { width: 5.5em; }
        #packet-info { width: 8em; }
        #loading     { display: none; }
    </style>
</head>

<body>
    <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
            <div class="container">
                <a class="brand" href="#">http-vis</a>
                <div class="pull-right" style="margin-left: 4px;">
                    <div class="btn-group">
                        <button id="options-toggle" disabled class="btn dropdown-toggle"><i class="icon-wrench"></i></button>
                    </div>
                    <button id="download-button" disabled class="btn"><i class="icon-download"></i></button>

                    <div id="options" class="popover bottom">
                        <div class="arrow"></div>
                        <h3 class="popover-title">Options</h3>
                        <div class="popover-content">
                            <form id="filtering-and-bandwidth-options" class="navbar-form">
                                <h2>Filtering and bandwidth</h2>
                                <select id="server-dropdown" title="Only show packets from this server"></select>
                                <div class="network-arrow" style="margin-top: 7px;">⇓</div>
                                <div class="input-append">
                                    <input type="text" id="bandwidth-input" style="width: 3em;" title="The bottleneck bandwidth between the client and the server.">
                                    <span class="add-on">kbps</span>
                                </div>
                                <div class="network-arrow" style="margin-top: -3px;">⇓</div>
                                <select id="client-dropdown" title="Only show packets to this client"></select>
                            </form>

                            <form id="color-options" class="form-inline" style="text-align: right">
                                <h2 style="margin-top: 30px;">Colors</h2>
                                <label>
                                    Color packets by
                                    <select id="colorby-dropdown" style="width: 125px;">
                                        <option>stream</option>
                                        <option>domain</option>
                                        <option>content-type</option>
                                        <option>monochrome</option>
                                    </select>
                                </label>
                                <label>
                                    Color theme
                                    <select id="colortheme-dropdown" style="width: 125px;">
                                        <option>dark</option>
                                        <option>light</option>
                                    </select>
                                </label>
                            </form>

                            <form id="width-options" class="navbar-form">
                                <h2 style="margin-top: 30px;">Width</h2>
                                <div class="input-append">
                                    <input type="text" disabled id="time-input" style="width: 2em;" title="Length of the capture">
                                    <span class="add-on">s</span>
                                </div>
                                ×
                                <div class="input-append">
                                    <input type="text" id="width-s-input" style="width: 1.8em;" title="Width of a 1 second time frame">
                                    <span class="add-on">px</span>
                                </div>
                                =
                                <div class="input-append">
                                    <input type="text" id="width-input" style="width: 2.4em;" title="Width of the chart">
                                    <span class="add-on">px</span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <form class="navbar-form pull-right" style="margin-left: 4px;">
                    <input id="file-chooser" type="file">
                </form>
                <form class="navbar-form pull-right">
                    <button id="load-example" class="btn"><i class="icon-folder-open"></i> Load example</button>
                </form>
                <p id="navbar-info" class="navbar-text">
                    <span id="loading">loading...</span>
                    <span id="time-info"></span>
                    <span id="tcp-info"></span>
                    <span id="http-info"></span>
                    <span id="packet-info"></span>
                </p>
            </div>
        </div>
    </div>

    <div id="barcode-container">
        <!--
        <?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [
            <!ATTLIST rect
                packet-id CDATA #IMPLIED
                transaction-id CDATA #IMPLIED>
        ]>
        -->
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dark">
            <style type="text/css">
                svg {
                    shape-rendering: crispEdges;
                    font-size: 24px;
                }

                rect.transaction-bar {
                    fill: #FFF;
                    fill-opacity: 0.7;
                }

                .light rect.transaction-bar {
                    stroke: grey;
                    stroke-width: 0.1em;
                    stroke-opacity: 0.5;
                }

                rect.request {
                    fill: #000;
                    fill-opacity: 0.4;
                }

                rect.response {
                    fill: #005;
                    fill-opacity: 0.25;
                }

                .dark rect#background { fill: black; }
                .light rect#background { fill: white; }

                .color-0 { fill: #004585; }
                .color-1 { fill: #ff430f; }
                .color-2 { fill: #ffd21f; }
                .color-3 { fill: #559c1c; }
                .color-4 { fill: #800022; }
                .color-5 { fill: #85caff; }
                .color-6 { fill: #303e04; }
                .color-7 { fill: #aed100; }
                .color-8 { fill: #4b1f6f; }
                .color-9 { fill: #ff970f; }
                .color-10 { fill: #c7000a; }
                .color-11 { fill: #e1095c; }
                .color-12 { fill: #06e554; }
                .color-13 { fill: #0084d1; }
            </style>
            <rect id="background" width="100%" height="100%"></rect>
            <g id="chart">
                <svg id="stackedarea" height="100"></svg>
                <svg id="barcode" y="105">
                    <g id="packets" class="packets"></g>
                    <g id="transactions"></g>
                </svg>
            </g>
        </svg>
    </div>
</body>

</html>
